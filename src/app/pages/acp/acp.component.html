<div class="descripcion">
  <h2>Definición</h2>
    <p >ACP (Análisis de Componentes Principales), construye una transformación lineal que elige un nuevo sistema de coordenadas para el conjunto de datos original cuya varianza más grande se fija
      en el primer eje (llamado el primer componente principal), la varianza grande en segundo lugar en el segundo eje y así sucesivamente. Para construir
      esta transformación lineal, primero debe construir la matriz de covarianza o la matriz de coeficiente de correlación. Debido a la simetría de esta matriz,
      existe una base adecuada para sus vectores propios. La transformación que convierte las coordenadas antiguas en las coordenadas de la nueva base es una
      transformación lineal necesaria para reducir la dimensionalidad de los datos. Además, las coordenadas en la nueva base de datos producen el componente
      factorial subyacente de los datos originales.</p>
      <p>ACP es especialmente útil para reducir el tamaño de los conjuntos de datos. Los primeros componentes principales describen la mayor parte de la
      varianza en los datos (cuanto más estrechamente correlacionadas están las variables iniciales). Estas subsecciones a veces contienen el aspecto
      "más importante" de la información y se pueden omitir otros elementos. Existen diferentes métodos para estimar el número de componentes principales
      significativos; El método más apropiado dependerá de la estructura de correlación en los datos originales.</p>
  <br>

  <p><strong>Introduce el número de componentes principales:</strong></p>
  <form [formGroup]="formulariodenumero" (submit)="setnumberofnewlabels()" class="listofinputs">
    <mat-form-field>
      <mat-label>Numero de CP</mat-label>
      <input matInput [formControlName]="'numberofnewlabels'" type="number" required >
    </mat-form-field>
    <button mat-raised-button type="submit" id="submitButtom" color="primary" style="margin-left: 20px;">Introducir</button>
  </form>
  <p *ngIf="isMayor">El nuevo número de componentes principales, tiene que ser menor que el número de variables de la tabla original.</p>

  <div class="PCA" *ngIf="sendIsPressed && !isMayor"><br><br>
    <h2>Propiedades</h2>
    <div style="display: flex; flex-direction: row; text-align: left;">
      <table>
        <thead>
          <tr>
            <th style="width: 10%;"></th>
            <th>Varianza </th><th>Autovalores </th><th>Desviación Estandar</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let i of lenghtOfData">
            <td>PC{{i+1}}</td>
            <td>{{ pcaCumuVal[i] * 100 | number: '.1-2' }}%</td>
            <td>{{ pcaEigenValues[i] | numberFormat }}</td>
            <td>{{ pcaStandDev[i] | numberFormat }}</td>
          </tr>
        </tbody>
      </table>
    </div><br><br>
    <div>
      <h2>Autovectores</h2>
      <div class="tableForScroll">
        <table>
          <tbody>
            <tr *ngFor="let row of pcaEigenVectors">
              <td *ngFor="let data of row">{{ data | numberFormat }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div style="display: flex; flex-direction: row; text-align: start; justify-content: flex-start;">
      <div *ngIf="twoLabels && !isMayor" style="width: 40%; margin: 10px; padding: 10px;">
        <h2>Datos iniciales:</h2>
        <app-scartt-chart [scarttChartData]="datosTabla"></app-scartt-chart>
      </div>
      <div *ngIf="!isMayor && isOne" style="width: 40%; margin: 10px; padding: 10px;">
        <h2>Datos Finales:</h2>
        <app-scartt-chart [scarttChartData]="dataset1"></app-scartt-chart><br>
      </div>
      <div *ngIf="!isMayor && isTwo" style="width: 40%; margin: 10px; padding: 10px;">
        <h2>Datos Finales:</h2>
        <app-scartt-chart [scarttChartData]="dataset2"></app-scartt-chart><br>
      </div>
    </div>

    <div style="display: flex; flex-direction: row; text-align: start;">
      <button mat-raised-button color="primary" id="ShowACP" (click)="showPredictionsFun()">Mostrar Componentes Principales</button>
    </div>

    <div *ngIf="showPredictions">
      <div *ngIf="!isStandarizezACP" style="text-align: start; align-items: start;">
        <br><br><h2>Componentes Principales</h2>
        <div class="tableForScroll">
          <table>
            <thead>
              <tr>
                <th *ngFor="let i of lenghtOfData">
                  PC{{ i + 1 }}
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let row of resultPCA">
                <td *ngFor="let pred of row">{{ pred | numberFormat }}  </td>
              </tr>
            </tbody>
          </table>
        </div><br><br>
        <button mat-raised-button color="primary" (click)="standarizeACP()">Estandarizar</button><br><br>
      </div>
      <div *ngIf="isStandarizezACP">
        <br><br><h2>Componentes Principales Estandarizados</h2>
        <div class="tableForScroll">
          <table>
            <thead>
              <tr>
                <th *ngFor="let i of lenghtOfData">
                  PC{{ i + 1 }}
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let row of resultPCAStand">
                <td *ngFor="let vs of row">{{ vs | numberFormat }}  </td>
              </tr>
            </tbody>
          </table>
        </div><br><br>
        <button mat-raised-button color="primary" (click)="standarizeACP()">Estandarizar</button><br><br>
      </div>
    </div>
  </div>
</div>
